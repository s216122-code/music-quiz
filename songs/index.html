<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <title>ğŸµ éš¨æ©ŸçŒœæ­ŒéŠæˆ² - å…è¼¸å…¥å‰¯æª”åç‰ˆ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background: rgba(0,0,0,0.5);
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 420px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }
        button {
            background: #ffd369;
            color: #333;
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 8px;
            transition: 0.2s;
        }
        button:hover {
            background: #ffc107;
            transform: translateY(-2px);
        }
        input {
            width: 85%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid transparent;
            margin-top: 15px;
            font-size: 16px;
            text-align: center;
            outline: none;
        }
        input:focus {
            border-color: #ffd369;
        }
        #status, #result {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            min-height: 27px;
        }
        .hint {
            font-size: 13px;
            color: #ccc;
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
<div class="container">
    <h1>ğŸ§ éš¨æ©ŸçŒœæ­Œ</h1>
    <p class="hint">æŒ‰ã€Œä¸‹ä¸€é¦–ã€é–‹å§‹ï¼Œè¼¸å…¥æ­Œåï¼ˆä¸éœ€è¼¸å…¥ .mp3ï¼‰</p>

    <audio id="music"></audio>

    <div>
        <button onclick="nextSong()">ğŸ”€ ä¸‹ä¸€é¦– / é‡æ–°é–‹å§‹</button>
    </div>
    
    <div>
        <button onclick="playMusic()">â–¶ æ’­æ”¾</button>
        <button onclick="pauseMusic()">â¸ æš«åœ</button>
    </div>

    <div>
        <input type="text" id="answer" placeholder="åœ¨é€™è£¡è¼¸å…¥æ­Œå" onkeypress="handleKeyPress(event)" />
    </div>

    <button onclick="checkAnswer()" style="background: #28a745; color: white;">âœ… ç¢ºèªç­”æ¡ˆ</button>

    <div id="status"></div>
    <div id="result"></div>
</div>

<script>
/**
 * âš ï¸ é€™è£¡å¡«å¯«ä½ çš„æ­Œåï¼ˆä¸éœ€è¦åŠ ä¸Š .mp3ï¼‰
 * ç¨‹å¼æœƒè‡ªå‹•å»è³‡æ–™å¤¾æ‰¾ã€Œé€™è£¡çš„åç¨±.mp3ã€
 */
const songs = [
    "å¹¾åˆ†ä¹‹å¹¾",
    "æœ€å¥½çš„å®‰æ’",
    "æ„›ä½ æ²’å·®",
    "æ„›éŒ¯",
    "åƒæ™´å¤©åƒé›¨å¤©"
];

const music = document.getElementById("music");
const status = document.getElementById("status");
const result = document.getElementById("result");
const answerInput = document.getElementById("answer");

let currentAnswer = "";
let timer = null;

// 1. ä¸‹ä¸€é¦–æ­Œ
function nextSong() {
    clearTimeout(timer);
    result.textContent = "";
    answerInput.value = "";
    
    // éš¨æ©Ÿé¸ä¸€å€‹æ­Œå
    const index = Math.floor(Math.random() * songs.length);
    currentAnswer = songs[index]; // é€™è£¡å„²å­˜çš„æ˜¯ã€Œç´”æ­Œåã€ï¼Œä¾‹å¦‚ï¼šå¹¾åˆ†ä¹‹å¹¾

    // é‡è¦ï¼šé€™è¡Œç¨‹å¼ç¢¼æœƒè‡ªå‹•å¹«æª”æ¡ˆè£œä¸Š .mp3 å¾Œç¶´å»è®€å–æª”æ¡ˆ
    music.src = currentAnswer + ".mp3";
    music.load(); 
    
    status.textContent = "ğŸ†• å·²æº–å‚™å¥½æ–°æ­Œæ›²ï¼";
}

// 2. æ’­æ”¾
function playMusic() {
    if (!currentAnswer) {
        status.textContent = "âš ï¸ è«‹å…ˆæŒ‰ã€Œä¸‹ä¸€é¦–ã€";
        return;
    }

    music.play().then(() => {
        status.textContent = "ğŸ¶ æ­£åœ¨æ’­æ”¾ (20 ç§’å€’æ•¸)";
        
        clearTimeout(timer);
        timer = setTimeout(() => {
            music.pause();
            status.textContent = "â± æ™‚é–“åˆ°ï¼è«‹è¼¸å…¥æ­Œå";
        }, 20000);
    }).catch(() => {
        alert("æ‰¾ä¸åˆ°æª”æ¡ˆï¼šã€" + currentAnswer + ".mp3" + "ã€‘\nè«‹ç¢ºèª MP3 æª”æ¡ˆæ”¾åœ¨ HTML æ—é‚Šï¼Œä¸”æª”åå®Œå…¨ä¸€è‡´ã€‚");
    });
}

// 3. æš«åœ
function pauseMusic() {
    music.pause();
    clearTimeout(timer);
    status.textContent = "â¸ å·²æš«åœ";
}

// 4. æª¢æŸ¥ç­”æ¡ˆ
function checkAnswer() {
    // .trim() æœƒè‡ªå‹•å»æ‰ä½¿ç”¨è€…ä¸å°å¿ƒæ‰“å‡ºçš„ã€Œå‰å¾Œç©ºç™½ã€
    const userAnswer = answerInput.value.trim();

    if (!currentAnswer) {
        result.textContent = "âš  è«‹å…ˆæŒ‰ä¸‹ä¸€é¦–é–‹å§‹éŠæˆ²";
        return;
    }

    if (userAnswer === "") {
        result.textContent = "âš  è«‹è¼¸å…¥ç­”æ¡ˆ";
        return;
    }

    // é€™è£¡åªæ¯”å°ã€Œç´”æ­Œåã€ï¼Œæ‰€ä»¥ä½¿ç”¨è€…ä¸éœ€è¦æ‰“ .mp3
    if (userAnswer === currentAnswer) {
        result.style.color = "#4eff4e";
        result.textContent = "ğŸ‰ æ­å–œç­”å°ï¼ç­”æ¡ˆæ˜¯ï¼š" + currentAnswer;
        music.pause();
        clearTimeout(timer);
    } else {
        result.style.color = "#ff4e4e";
        result.textContent = "âŒ ç­”éŒ¯äº†ï¼Œå†è½çœ‹çœ‹ï¼Ÿ";
    }
}

// æ”¯æ´æŒ‰ Enter éµç›´æ¥æª¢æŸ¥ç­”æ¡ˆ
function handleKeyPress(e) {
    if (e.key === "Enter") {
        checkAnswer();
    }
}
</script>
</body>
</html>